#!/bin/sh

PATH="/sbin:/bin:/usr/sbin:/usr/bin"
DIR="/var/backups/"
FILE="${DIR}/$(date +%F).sql"
DAYS="14"

mysqldump --defaults-extra-file=/etc/mysql/debian.cnf --all-databases --routines --events --add-drop-database --add-drop-table > ${FILE}
chmod 0400 ${FILE}
find ${DIR} -type f -name \*.sql -mtime +${DAYS} -exec rm -f {} \;

